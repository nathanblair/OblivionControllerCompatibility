<!-- controls_menu.xml -->
<!-- DarN Version 1.0 -->
<menu name="ControlsMenu">
	<class> &ControlsMenu; </class>
	<stackingtype> &no_click_past; </stackingtype>
	<alpha>	0 </alpha>
	<locus> &true; </locus>
	<explorefade> 0.25 </explorefade>

	<user0> 1 </user0>			<!-- Page number -->

	<user1>						<!-- height of single menu item plus buffer zone -->
		<copy src="controls_main_rect" trait="height" />	<!-- parent rect height -->
		<div src="controls_vertical_scroll" trait="user8" />	<!-- num items visible -->
	</user1>

	<user2> <copy src="strings()" trait="_move" /> </user2>		<!-- Left stick setting -->
	<user3> <copy src="strings()" trait="_look" /> </user3>		<!-- Right stick setting -->

	<user4> &true; </user4>		<!-- true = "normal" mode, false = "selected" mode -->

	<user5> </user5>				<!-- Device string -->

	<_button_buffer> 20 </_button_buffer> <!-- DarN 50 -->

	<!-- Text colors -->
<include src="darn\system_config.xml" />
	<red> <copy src="darnui_settings" trait="_lred" /> </red> <!-- DarN 117 -->
	<green>	<copy src="darnui_settings" trait="_lgreen" /> </green> <!-- DarN 59 -->
	<blue>	<copy src="darnui_settings" trait="_lblue" /> </blue> <!-- DarN 33 -->


	<rect name="controls_background">
<include src="darn\generic_background75.xml" />
		<x>
			<copy src="screen()" trait="width" />
			<sub src="me()" trait="width" />
			<div> 2 </div>
		</x>
		<y>
			<copy src="screen()" trait="height" />
			<sub src="me()" trait="height" />
			<div> 2 </div>
		</y>
		<user0>	<!-- DarN 666(!) width -->
			<copy> 454 </copy>
			<sub>
				<copy src="controls_vertical_scroll" trait="width" />
				<add> 20 </add>
				<onlyif>
					<copy src="ControlsMenu" trait="user0" />
					<eq> 2 </eq>
					<and> <not src="controls_vertical_scroll" trait="visible" /> </and>
				</onlyif>
			</sub>
		</user0>

		<user1>	<!-- DarN 580 height (dynamic resize) -->
			<copy src="controls_right_stick_label" trait="y" />
			<add src="controls_right_stick_label" trait="height" />
			<add> 85 </add>
			<add>
				<copy> 580 </copy>
				<sub>
					<copy src="controls_right_stick_label" trait="y" />
					<add src="controls_right_stick_label" trait="height" />
					<add> 55 </add>
				</sub>
				<onlyif>
					<copy src="ControlsMenu" trait="user0" />
					<eq> 2 </eq>
				</onlyif>
			</add>
		</user1>


<!--================================================================================================-->
<!--============================================ PAGE 1 ============================================-->
<!--================================================================================================-->


		<!-- PAGE ONE ========================================================================-->
		<rect name="controls_page_1">
			<width> <copy src="parent()" trait="width" /> </width>
			<height> <copy src="parent()" trait="height" /> </height>
			<x> 0 </x>
			<y> 0 </y>
			<locus> &true; </locus>

			<xbuttonb> <ref src="controls_return_button_2" trait="clicked" /> </xbuttonb>


			<!--====================================== MOUSE SENSITIVITY =======================================-->
			<text name="controls_sensitivity_label">
				<font> <copy src="darnui_settings" trait="_lfont" /> </font> <!-- DarN add -->
				<visible>
					<copy src="ControlsMenu" trait="user0" />
					<eq> 1 </eq>
				</visible>
				<string> <copy src="strings()" trait="_mousesensitivity" /> </string>
				<depth> 3 </depth>
				<alpha> <copy src="darnui_settings" trait="_lalpha" /> </alpha> <!-- DarN 255 -->
				<red>
					<copy src="ControlsMenu" trait="red" />
				</red>
				<green>
					<copy src="ControlsMenu" trait="green" />
				</green>
				<blue>
					<copy src="ControlsMenu" trait="blue" />
				</blue>
				<x>
					<copy src="controls_sensitivity_slider" trait="x" />
					<add>
						<copy src="controls_sensitivity_slider" trait="width" />
						<sub src="me()" trait="width" />
						<div> 2 </div>
					</add>
				</x>
				<y> 20 </y> <!-- DarN 96 -->
				<depth> 7 </depth>
			</text>

			<image name="controls_sensitivity_slider">
<include src="darn\horiz_floating_scroll.xml" />
				<id> 5 </id>
				<visible>
					<copy src="controls_sensitivity_label" trait="visible" />
				</visible>
				<x>
					<copy src="child(horizontal_scroll_left)" trait="width" />
					<add>
						<copy src="parent()" trait="width" />
						<sub src="me()" trait="width" />
						<sub src="child(horizontal_scroll_left)" trait="width" />
						<sub src="child(horizontal_scroll_right)" trait="width" />
						<div> 2 </div>
					</add>
				</x>
				<y>
					<copy src="controls_sensitivity_label" trait="y" />
					<add src="controls_sensitivity_label" trait="height" />
					<add> 18 </add>  <!-- DarN 12 -->
				</y>
				<depth> 5 </depth>

				<user6> 6 </user6>		<!-- scroll marker id -->
				<user8> &true; </user8>	<!-- DarN falsetext visibility -->
				<_textside> &center; </_textside>
			</image>

			<image name="controls_sensitivity_slider_marker">
				<zoom> 75 </zoom> <!-- DarN add -->
				<id> &generic; </id>
				<visible>
					<copy src="controls_sensitivity_label" trait="visible" />
				</visible>
				<target> &true; </target>
				<depth> 3 </depth>
				<filename> Textures\DarkUI\Menus\dialog\dialog_selection_fulldui.dds </filename>
				<alpha>
					<copy> 255 </copy>
					<mul>
						<copy src="me()" trait="mouseover" />
						<add src="controls_sensitivity_slider" trait="_mouseover_any" />
						<min> 1 </min>
					</mul>
				</alpha>
				<width>
					<copy src="controls_sensitivity_slider" trait="width" />
					<add> 90 </add> <!-- DarN 120 -->
				</width>
				<height> 48 </height> <!-- DarN 64 -->
				<x>
					<copy src="controls_sensitivity_slider" trait="x" />
					<sub> 45 </sub>  <!-- DarN 60 -->
				</x>
				<y>
					<copy src="controls_sensitivity_slider" trait="y" />
					<sub> 16 </sub> <!-- DarN 18 -->
				</y>
				<locus> &true; </locus>

				<image name="controls_sensitivity_slider_marker_2">
					<zoom> 75 </zoom> <!-- DarN add -->
					<depth> 1 </depth>
					<filename> Textures\DarkUI\Menus\dialog\dialog_selection_cutdui.dds </filename>
					<alpha> <copy src="parent()" trait="alpha" /> </alpha>
					<width> 78 </width> <!-- DarN 104 -->
					<height> 48 </height> <!-- DarN 64 -->
					<x>
						<copy src="parent()" trait="width" />
						<sub> 70 </sub> <!-- DarN 100 -->
					</x>
					<y> 0 </y>
				</image>
			</image>


			<!--=========================================== INVERT Y ===========================================-->
			<text name="controls_invert_y_label">
				<font> <copy src="darnui_settings" trait="_lfont" /> </font> <!-- DarN add -->
				<depth> 3 </depth>
				<visible>
					<copy src="ControlsMenu" trait="user0" />
					<eq> 1 </eq>
				</visible>
				<string> <copy src="strings()" trait="_inverty" /> </string>
				<depth> 3 </depth>
				<alpha> <copy src="darnui_settings" trait="_lalpha" /> </alpha> <!-- DarN 255 -->
				<red>
					<copy src="ControlsMenu" trait="red" />
				</red>
				<green>
					<copy src="ControlsMenu" trait="green" />
				</green>
				<blue>
					<copy src="ControlsMenu" trait="blue" />
				</blue>
				<x>
					<copy src="controls_sensitivity_label" trait="x" />
				</x>
				<y>
					<copy src="controls_sensitivity_slider_marker" trait="y" />
					<add src="controls_sensitivity_slider_marker" trait="height" />
					<add> 30 </add>
				</y>
			</text>

			<rect name="controls_invert_y_button">
<include src="darn\button_floating_2.xml" />
				<id> 7 </id>
				<depth> 3 </depth>
				<visible>
					<copy src="controls_invert_y_label" trait="visible" />
				</visible>
				<_center_x>
					<copy src="controls_invert_y_label" trait="x" />
					<add src="controls_sensitivity_label" trait="width" />
					<sub> 32 </sub>
				</_center_x>
				<_top>
					<copy src="controls_invert_y_label" trait="y" />
					<sub> <!-- DarN <sub>12</sub> -->
						<copy src="me()" trait="height" />
						<sub src="controls_invert_y_label" trait="height" />
						<div> 2 </div>
					</sub>
				</_top>
				<string> <copy src="strings()" trait="_onoff" /> </string>
			</rect>


			<!--========================================== SWAP AXES ===========================================-->
			<rect name="controls_swap_button">
<include src="darn\button_floating_2.xml" />
				<id> 8 </id>
				<depth> 3 </depth>
				<visible>
					<copy src="ControlsMenu" trait="user0" />
					<eq> 1 </eq>
				</visible>
				<_center_x>
					<copy src="parent()" trait="width" />
					<div> 2 </div>
				</_center_x>
				<_top>
					<copy src="controls_left_stick_label" trait="y" />
					<sub src="me()" trait="height" />
				</_top>
				<string> <copy src="strings()" trait="_swapstickcontrols" /> </string>

				<red>
					<copy src="child(button_text)" trait="red" />
				</red>
				<green>
					<copy src="child(button_text)" trait="green" />
				</green>
				<blue>
					<copy src="child(button_text)" trait="blue" />
				</blue>
			</rect>

			<text name="controls_left_stick_label">
				<font> <copy src="darnui_settings" trait="_lfont" /> </font> <!-- DarN add -->
				<depth> 3 </depth>
				<visible>
					<copy src="ControlsMenu" trait="user0" />
					<eq> 1 </eq>
				</visible>
				<locus> &true; </locus>
				<string> <copy src="strings()" trait="_leftstick" /> </string>
				<alpha> <copy src="darnui_settings" trait="_lalpha" /> </alpha> <!-- DarN 255 -->
				<x>
					<copy src="controls_invert_y_label" trait="x" />
					<sub> 10 </sub> <!-- DarN add -->
				</x>
				<y>
					<copy src="controls_invert_y_label" trait="y" />
					<add src="controls_invert_y_label" trait="height" />
					<add> 66 </add> <!-- DarN 96 -->
				</y>
				<red> <!-- DarN TODO mimic color switch for disabled controls -->
					<copy src="ControlsMenu" trait="red" />
				</red>
				<green>
					<copy src="ControlsMenu" trait="green" />
				</green>
				<blue>
					<copy src="ControlsMenu" trait="blue" />
				</blue>
			</text>
			<text name="controls_left_stick_setting">
				<font> <copy src="darnui_settings" trait="_lfont" /> </font> <!-- DarN add -->
				<depth> 3 </depth>
				<visible>
					<copy src="ControlsMenu" trait="user0" />
					<eq> 1 </eq>
				</visible>
				<alpha> 255 </alpha>
				<string>
					<copy src="ControlsMenu" trait="user2" />
				</string>
				<x>
					<copy src="controls_invert_y_button" trait="_center_x" />
					<sub>
						<copy src="me()" trait="width" />
						<div> 2 </div>
					</sub>
					<add> 20 </add>  <!-- DarN add -->
				</x>
				<y>
					<copy src="controls_left_stick_label" trait="y" />
				</y>
				<red>
					<copy src="controls_swap_button" trait="red" />
				</red>
				<green>
					<copy src="controls_swap_button" trait="green" />
				</green>
				<blue>
					<copy src="controls_swap_button" trait="blue" />
				</blue>
			</text>

			<text name="controls_right_stick_label">
				<font> <copy src="darnui_settings" trait="_lfont" /> </font> <!-- DarN add -->
				<depth> 3 </depth>
				<visible>
					<copy src="ControlsMenu" trait="user0" />
					<eq> 1 </eq>
				</visible>
				<locus> &true; </locus>
				<string> <copy src="strings()" trait="_rightstick" /> </string>
				<alpha> <copy src="darnui_settings" trait="_lalpha" /> </alpha>  <!-- DarN 255 -->
				<x>
					<copy src="controls_left_stick_label" trait="x" />
				</x>
				<y>
					<copy src="controls_left_stick_label" trait="y" />
					<add src="controls_left_stick_label" trait="height" />
				</y>
				<red>
					<copy src="ControlsMenu" trait="red" />
				</red>
				<green>
					<copy src="ControlsMenu" trait="green" />
				</green>
				<blue>
					<copy src="ControlsMenu" trait="blue" />
				</blue>
			</text>

			<text name="controls_right_stick_setting">
				<font> <copy src="darnui_settings" trait="_lfont" /> </font> <!-- DarN add -->
				<depth> 3 </depth>
				<visible>
					<copy src="ControlsMenu" trait="user0" />
					<eq> 1 </eq>
				</visible>
				<alpha> 255 </alpha>
				<string>
					<copy src="ControlsMenu" trait="user3" />
				</string>
				<x> <copy src="controls_left_stick_setting" trait="x" /> </x>  <!-- DarN rewrite -->
				<y>
					<copy src="controls_right_stick_label" trait="y" />
				</y>
				<red>
					<copy src="controls_swap_button" trait="red" />
				</red>
				<green>
					<copy src="controls_swap_button" trait="green" />
				</green>
				<blue>
					<copy src="controls_swap_button" trait="blue" />
				</blue>
			</text>


			<!--====================================== RETURN BUTTON (Pg1) ======================================-->
			<image name="controls_return_button_2">
	<include src="darn\button_long.xml" />
				<id> 1 </id>
				<depth> 3 </depth>
				<visible>
					<copy src="ControlsMenu" trait="user0" />
					<eq> 1 </eq>
				</visible>
				<x>
					<copy src="parent()" trait="width" />
					<sub src="me()" trait="width" />
					<sub src="ControlsMenu" trait="_button_buffer" />
				</x>
				<y>
					<copy src="parent()" trait="height" />
					<sub src="me()" trait="height" />
					<sub> 15 </sub> <!-- DarN 25 -->
				</y>
				<clicksound> 2 </clicksound>
				<user0> <copy src="strings()" trait="_return" /> </user0>
			</image>

		</rect>		<!-- end page one -->


<!--================================================================================================-->
<!--============================================ PAGE 2 ============================================-->
<!--================================================================================================-->


		<!-- PAGE TWO - CONTROL MAPPING ========================================================================-->
		<rect name="controls_page_2">
			<width> <copy src="parent()" trait="width" /> </width>
			<height> <copy src="parent()" trait="height" /> </height>
			<x> 0 </x>
			<y> 0 </y>
			<locus> &true; </locus>

			<!--============================================ DEVICE ==============================================-->
			<rect name="controls_device_activate_highlight">
				<id> &generic; </id>
				<target> &true; </target>
				<x> <copy src="controls_device_toggle_floating" trait="x" /> </x>
				<y> <copy src="controls_device_toggle_floating" trait="y" /> </y>
				<height> <copy src="controls_device_toggle_floating" trait="height" /> </height>
				<width> <copy src="controls_device_toggle_floating" trait="width" /> </width>
				<depth> 2 </depth>
			</rect>
			<image name="controls_device_toggle_floating">
				<zoom> 75 </zoom> <!-- DarN add -->
				<visible>
					<copy src="controls_device_toggle_left" trait="mouseover" />
					<gt> 0 </gt>
					<or>
						<copy src="controls_device_toggle_right" trait="mouseover" />
						<gt> 0 </gt>
					</or>
					<or>
						<copy src="controls_device_activate_highlight" trait="mouseover" />
						<gt> 0 </gt>
					</or>
					<and> <!-- DarN add (Bug in orignal) -->
						<copy src="ControlsMenu" trait="user0" />
						<eq> 2 </eq>
					</and>
				</visible>
				<filename> Textures\DarkUI\Menus\Dialog\dialog_selection_fulldui.dds </filename>
				<width>
					<copy src="me()" trait="_buffer" />
					<add src="controls_device_toggle_right" trait="x" />
					<add src="controls_device_toggle_right" trait="width" />
					<sub src="me()" trait="x" />
				</width>
				<height> 48 </height> <!-- DarN 64 -->
				<depth> 3 </depth>
				<x>
					<copy src="controls_device_toggle_left" trait="x" />
					<sub src="me()" trait="_buffer" />
				</x>
				<y> 9 </y>
				<locus> &true; </locus>

				<_buffer> 10 </_buffer>

				<image name="effset_attribute_floating_end">
					<zoom> 75 </zoom> <!-- DarN add -->
					<depth> 1 </depth>
					<filename> Textures\DarkUI\Menus\Dialog\dialog_selection_cutdui.dds </filename>
					<width> 78 </width> <!-- DarN 104 -->
					<height> 48 </height> <!-- DarN 64 -->
					<x>
						<copy src="parent()" trait="width" />
						<sub src="me()" trait="width" />
						<add> 6 </add> <!-- DarN 8 -->
					</x>
				</image>
			</image>
			<image name="controls_device_toggle_left">
				<zoom> 75 </zoom> <!-- DarN add -->
				<id> 12 </id>
				<visible> <copy src="controls_device_text" trait="visible" /> </visible>
				<depth> 5 </depth>
				<target> &true; </target>
				<filename> Menus\Shared\shared_arrow_left.dds </filename>
				<width> 93 </width> <!--- DarN 124 -->
				<height> 27 </height> <!-- DarN 36 -->
				<x>
					<copy src="controls_main_rect" trait="x" />
					<add src="controls_border_left" trait="x" />
					<add src="controls_device_toggle_floating" trait="_buffer" />
				</x>
				<y>
					<copy src="controls_device_text" trait="y" />
					<add>
						<copy src="controls_device_text" trait="height" />
						<sub src="me()" trait="height" />
						<div> 2 </div>
					</add>
				</y>
			</image>
			<text name="controls_device_text">
				<font> <copy src="darnui_settings" trait="_lfont" /> </font> <!-- DarN add -->
				<depth> 6 </depth> <!-- DarN 3 -->
				<visible>
					<copy src="ControlsMenu" trait="user0" />
					<eq> 2 </eq>
				</visible>
				<justify> &center; </justify>
				<red> 217 </red>
				<green> 185 </green>
				<blue> 102 </blue>
				<alpha> 255 </alpha>
				<x>
					<copy src="controls_device_toggle_left" trait="x" />
					<add>
						<copy src="controls_device_toggle_right" trait="x" />
						<add src="controls_device_toggle_right" trait="width" />
						<sub src="controls_device_toggle_left" trait="x" />
						<div> 2 </div>
					</add>
				</x>
				<string> <copy src="ControlsMenu" trait="user5" /> </string>
				<y> 20 </y>
			</text>
			<image name="controls_device_toggle_right">
				<zoom> 75 </zoom> <!-- DarN add -->
				<id> 13 </id>
				<visible> <copy src="controls_device_text" trait="visible" /> </visible>
				<depth> 5 </depth>
				<target> &true; </target>
				<filename> Menus\Shared\shared_arrow_right.dds </filename>
				<width> 91 </width> <!--- DarN 121 -->
				<height> 27 </height> <!-- DarN 36 -->
				<x>
					<copy src="controls_main_rect" trait="x" />
					<add src="controls_border_right" trait="x" />
					<sub src="me()" trait="width" />
					<sub src="controls_device_toggle_floating" trait="_buffer" />
				</x>
				<y>
					<copy src="controls_device_toggle_left" trait="y" />
				</y>
			</image>


			<!--=========================================== MAIN RECT ============================================-->
			<rect name="controls_main_rect">
				<target> &true; </target>		<!-- for mouse wheel -->
				<depth> 3 </depth>
				<visible>
					<copy src="ControlsMenu" trait="user0" />
					<eq> 2 </eq>
				</visible>
				<x>
					<copy src="controls_defaults_button" trait="x" />
					<add src="controls_border_left" trait="width" />
				</x>
				<y> 75 </y>
				<width> 404 </width> <!-- DarN 538 -->
				<height> 460 </height> <!-- DarN 400 -->
				<alpha> 0 </alpha>
				<locus> &true; </locus>
				<clipwindow> &true; </clipwindow>

				<!--======================================== BORDERS ===========================================-->
				<image name="controls_border_top">
					<filename> Textures\DarkUI\Menus\Shared\shared_border_horizontal_1dui.dds </filename>
					<x> -24 </x>
					<y>
						<copy> 0 </copy>
						<sub src="me()" trait="height" />
					</y>
					<width>
						<copy src="parent()" trait="width" />
						<sub src="me()" trait="x" />
						<sub> 32 </sub>
					</width>
					<height> 6 </height>
				</image>

				<image name="controls_border_left">
					<filename> Textures\DarkUI\Menus\Shared\shared_border_vertical_2dui.dds </filename>
					<x>
						<copy> 0 </copy>
						<sub src="me()" trait="width" />
					</x>
					<y> 0 </y>
					<width> 6 </width>
					<height>
						<copy src="parent()" trait="height" />
						<sub src="me()" trait="y" />
					</height>
				</image>

				<image name="controls_border_middle">
					<filename> Textures\DarkUI\Menus\Shared\shared_border_vertical_2dui.dds </filename>
					<x> <!-- DarN 300 -->
						<copy src="controls_border_top" trait="x" />
						<add src="controls_border_top" trait="width" />
						<sub src="me()" trait="width" />
						<div> 2 </div>
						<add> 30 </add> <!-- DarN keep action label area bigger than button area -->
					</x>
					<y> 0 </y>
					<width> 6 </width>
					<height>
						<copy src="parent()" trait="height" />
						<sub src="me()" trait="y" />
					</height>
				</image>

				<image name="controls_border_right">
					<filename> Textures\DarkUI\Menus\Shared\shared_border_vertical_2dui.dds </filename>
					<x>
						<copy src="parent()" trait="width" />
						<sub> 32 </sub>
					</x>
					<y> 0 </y>
					<width> 6 </width>
					<height>
						<copy src="parent()" trait="height" />
						<sub src="me()" trait="y" />
					</height>
				</image>

				<image name="controls_border_bottom">
					<filename> Textures\DarkUI\Menus\Shared\shared_border_horizontal_1dui.dds </filename>
					<x> -24 </x>
					<y>
						<copy src="parent()" trait="height" />
						<add src="darnui_settings" trait="_clboffset" /> <!-- DarN add padding -->
					</y>
					<width>
						<copy src="parent()" trait="width" />
						<sub src="me()" trait="x" />
						<sub> 32 </sub>
					</width>
					<height> 6 </height>
				</image>

				<!--========================================= SCROLL BAR ===========================================-->
				<image name="controls_vertical_scroll">
<include src="darn\vert_floating_scroll.xml" />
					<id> 2 </id>
					<x> <copy src="parent()" trait="width" /> </x>
					<y> <copy src="child(vertical_scroll_top)" trait="height" /> </y>
					<depth> 3 </depth>
					<height>
						<copy src="parent()" trait="height" />
						<sub src="child(vertical_scroll_top)" trait="height" />
						<sub src="child(vertical_scroll_bottom)" trait="height" />
					</height>
					<user1> 0 </user1>		<!-- Minimum value that can be scrolled to (should usually be zero) -->
					<user2>
						<copy src="controls_list_pane" trait="childcount" />
						<sub src="me()" trait="user8" />
					</user2>				<!-- Maximum value that can be scrolled to (should be the number of
												items minus the number of items visible.  i.e. if your list has
												8 items and you can see 2 at any one time, this should be 6 -->
					<user3> 1 </user3>		<!-- When the scroll arrow is clicked on, this is how many items it will advance -->
					<user4>					<!-- DarN 5 When the scroll bar is clicked on, this is how many items it will advance -->
						<copy src="me()" trait="user8" />
						<sub> 1 </sub>
					</user4>
					<user5> 0 </user5>		<!-- The starting position of the scroll bar (set this only once) -->
					<user6> 3 </user6>		<!-- A unique ID so that the scroll marker can be dragged around -->
					<!-- user7 = current value -->
					<user8> <copy src="darnui_settings" trait="_clinumitems" /> </user8>		<!-- DarN 6 How many items are visible at once -->
				</image>


				<!--======================================== TEMPLATE PANE =========================================-->
				<rect name="controls_list_pane">
					<id> 4 </id>
					<alpha> 0 </alpha>
					<locus> &true; </locus>
					<clips> &true; </clips>
					<width>
						<copy src="parent()" trait="width" />
					</width>
					<height>
						<copy src="me()" trait="childcount" />
						<mul src="ControlsMenu" trait="user1" />
					</height>
					<x> 0 </x>
					<y>
						<copy> 0 </copy>
						<sub src="controls_vertical_scroll" trait="user7" /> <!-- user7 = current value -->
						<mul src="ControlsMenu" trait="user1" />
					</y>

					<_left_edge_buffer> 10 </_left_edge_buffer>

					<!-- This is a list pane, and is not a focus itself, but when the child elements don't know how to handle
						an input command, they defer to their parent. The following directions are for those times. -->
					<target> &false; </target>

					<!-- list items are added here in code from the template -->

				</rect>	<!-- controls_list_pane -->
			</rect>  <!-- controls_main_rect -->


			<!-- ====================================== DEFAULTS BUTTON ======================================= -->
			<image name="controls_defaults_button">
<include src="darn\button_long.xml" />
				<id> 10 </id>
				<depth> 3 </depth>
				<visible>
					<copy src="ControlsMenu" trait="user0" />
					<eq> 2 </eq>
					<and src="ControlsMenu" trait="user4" />
				</visible>
				<x> <copy src="ControlsMenu" trait="_button_buffer" /> </x>
				<y> <copy src="controls_return_button" trait="y" /> </y>
				<user0> <copy src="strings()" trait="_defaults" /> </user0>
			</image>


			<!-- ======================================== CONTROLS BUTTON ========================================= -->
			<image name="controls_more_button">
	<include src="darn\button_long.xml" />
				<id> 9 </id>
				<depth> 3 </depth>
				<visible>
					<copy src="ControlsMenu" trait="user0" />
					<eq> 1 </eq>
				</visible>
				<x> <copy src="controls_defaults_button" trait="x" /> </x>
				<y> <copy src="controls_return_button" trait="y" /> </y>
				<user0> <copy src="strings()" trait="_controls" /> </user0>
			</image>


			<!--======================================== RETURN BUTTON =========================================-->
			<image name="controls_return_button">
<include src="darn\button_long.xml" />
				<id> 1 </id>
				<visible>
					<copy src="ControlsMenu" trait="user0" />
					<eq> 2 </eq>
					<and src="ControlsMenu" trait="user4" />
				</visible>
				<depth> 3 </depth>
				<x>
					<copy src="parent()" trait="width" />
					<sub src="me()" trait="width" />
					<sub src="ControlsMenu" trait="_button_buffer" />
				</x>
				<y>
					<copy src="parent()" trait="height" />
					<sub src="me()" trait="height" />
					<sub> 15 </sub> <!-- DarN 25 -->
				</y>
				<clicksound> 2 </clicksound>
				<user0> <copy src="strings()" trait="_return" /> </user0>
			</image>

			<!--========================================= INSTRUCTIONS ===========================================-->
			<text name="controls_instructions">
				<font> 3 </font> <!-- DarN add -->
				<id> 11 </id>
				<visible>
					<copy src="ControlsMenu" trait="user0" />
					<eq> 2 </eq>
					<and> <not src="ControlsMenu" trait="user4" /> </and>
				</visible>
				<depth> 3 </depth>
				<justify> &center; </justify>
				<x>
					<copy src="parent()" trait="width" />
					<div> 2 </div>
				</x>
				<y>
					<copy src="controls_defaults_button" trait="y" />
					<add>
						<copy src="controls_defaults_button" trait="height" />
						<sub src="me()" trait="height" />
						<div> 2 </div>
					</add>
				</y>
				<alpha> 255 </alpha> <!-- DarN 255 -->
				<red>
					<!-- <copy src="ControlsMenu" trait="red" /> -->
					217
				</red>
				<green>
					<!-- <copy src="ControlsMenu" trait="green" /> -->
					185
				</green>
				<blue>
					<!-- <copy src="ControlsMenu" trait="blue" /> -->
					102
				</blue>
				<wrapwidth>
					<copy src="parent()" trait="width" />
					<sub> 32 </sub>
				</wrapwidth>
			</text>

		</rect>	<!-- end page two -->

	</rect> <!-- end controls_background -->

<!--========================================== TEMPLATE ============================================-->

	<template name="controls_template">
		<rect name="controls_template_item">
			<x> 0 </x>
			<y>
				<copy src="me()" trait="listindex" />
				<mul src="me()" trait="height" />
			</y>
			<depth> 1 </depth>
			<width>
				<copy src="parent()" trait="width" />
			</width>
			<locus> &true; </locus>
			<clips> &true; </clips>
			<target> &true; </target>
			<repeatvertical> &true; </repeatvertical>

			<red> </red>			<!-- text color - red component -->
			<green> </green>		<!-- text color - green component -->
			<blue> </blue>		<!-- text color - blue component -->

			<listindex> <copy src="me()" trait="user0" /> </listindex>
			<user0> </user0>		<!-- index -->
			<user1> </user1>		<!-- label string -->
			<user2>				<!-- x-position around which to center button -->
				<!-- <copy src="parent()" trait="width" />
				<sub> 100 </sub> --> <!-- DarN 128 -->
				<copy src="controls_border_middle" trait="x" />
				<add src="controls_border_right" trait="x" />
				<sub src="controls_border_middle" trait="width" />
				<div> 2 </div>
			</user2>
			<user3>key</user3>	<!-- button string (PC only) -->

			<_left_edge_buffer> <copy src="parent()" trait="_left_edge_buffer" /> </_left_edge_buffer>

			<!-- This element is a list item. If it gets an input command it doesn't know how to handle
			     it will defer the command to its parent. The xlist trait set to true triggers this. -->
			<image name="controls_template_floating">
				<zoom> 40 </zoom> <!-- DarN add -->
				<visible>
					<copy src="parent()" trait="mouseover" />
					<gt> 0 </gt>
				</visible>
				<filename> Textures\DarkUI\Menus\Dialog\dialog_selection_fulldui.dds </filename>
				<width>
					<copy src="parent()" trait="width" />
					<sub> 32 </sub>
				</width>
				<height> 26 </height> <!-- DarN 64 -->
				<depth> 1 </depth>
				<x> -2 </x> <!-- DarN 0 -->
				<y> 0 </y>

				<image name="effset_attribute_floating_end">
					<zoom> 40 </zoom> <!-- DarN add -->
					<depth> 2 </depth>
					<filename> Textures\DarkUI\Menus\Dialog\dialog_selection_cutdui.dds </filename>
					<width> 42 </width> <!-- DarN 104 -->
					<height> 26 </height> <!-- DarN 64 -->
					<x>
						<copy src="parent()" trait="width" />
						<add> 6 </add> <!-- DarN 8 -->
						<sub src="me()" trait="width" />
					</x>
					<y> 0 </y>
				</image>
			</image>

			<text name="controls_template_label">
				<font> <copy src="darnui_settings" trait="_clifont" /> </font> <!-- DarN add -->
				<depth> 3 </depth>
				<alpha> <!-- DarN 255 -->
					<copy> 0 </copy>
					<add>
						<copy src="darnui_settings" trait="_clialpha" />
						<onlyifnot src="controls_instructions" trait="visible" />
					</add>
					<add>
						<copy> 255 </copy>
						<onlyif src="controls_instructions" trait="visible" />
					</add>
				</alpha>
				<clips> &true; </clips>
				<string>
					<copy src="parent()" trait="user1" />
				</string>
				<red>217</red>
				<green>185</green>
				<blue>102</blue>
				<x>
					<copy src="parent()" trait="_left_edge_buffer" />
					<add src="darnui_settings" trait="_clixoffset" />
				</x>
				<y> <!-- DarN 12 -->
					<copy src="parent()" trait="height" />
					<div> 2 </div>
					<add src="darnui_settings" trait="_cliyoffset" />
				</y>
			</text>

			<text name="controls_template_button">
				<font> <copy src="darnui_settings" trait="_clifont" /> </font> <!-- DarN add -->
				<clips> &true; </clips>
				<depth> 3 </depth>
				<red>
					<copy src="parent()" trait="red" />
				</red>
				<green>
					<copy src="parent()" trait="green" />
				</green>
				<blue>
					<copy src="parent()" trait="blue" />
				</blue>
				<x>
					<copy src="parent()" trait="user2" />
				</x>
				<y>
					<copy src="parent()" trait="height" />
					<div> 2 </div>
					<add src="darnui_settings" trait="_cliyoffset" />
				</y>
				<string>
					<copy src="parent()" trait="user3" />
				</string>
				<justify> &center; </justify>
			</text>
		</rect>
	</template>

</menu>

<!--====================================================================================================-->
<!--====================================================================================================-->
